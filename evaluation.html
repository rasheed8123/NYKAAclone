<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Karlo</title>
    <style>
      body{
        display:flex;
      }
      #main,#last{
        width:60%;
        margin:30px;

      }
      td{
        padding:10px;
      }
    </style>
</head>
<body>
    
    <div id="Op">
      <h1>Karlo</h1>
    <form>
      <h1>category issue</h1>
        <select id="ticket">
            <option value=""></option>
            <option value="money">refund</option>
            <option value="missing">item missing</option>
            <option value="order">order status</option>
            <option value="delivery">delivery</option>
            <option value="feedback">feedback</option>
        </select>
        <hr>
        <h1>description</h1>
        
        <textarea id="issue" cols="30" rows="10" placeholder="Enter issue here"></textarea>
        <hr>
        <h1>DATE</h1>
        <input type="date" id="date">
        <hr>
        <h1>Token Number</h1>
        <input type="number" id="token" placeholder="Enter Token Number">
        <input type="submit" id="submit">
    </form>
    </div>
    <div id="last">
    <hr>
    <hr>
    <select id="category" onchange="cat()">
        <option value="">By Category</option>
        <option value="money">refund</option>
        <option value="missing">item missing</option>
        <option value="order">order status</option>
        <option value="delivery">delivery</option>
        <option value="feedback">feedback</option>
    </select>
    <select id="number" onchange="num()">
        <option value="">Sort</option>
        <option value="High">High-to-Low</option>
        <option value="Low">Low-to-High</option>
    </select>
    <table>
        <thead>
        <tr>
            <td>Token Number</td>
            <td>Category</td>
            <td>Description</td>
        </tr>
        </thead>
        <tbody>
        </tbody>
    </table>
</div>
</body>
</html>
<script>
    document.querySelector("form").addEventListener("submit",myfunction)
    var karlo = JSON.parse(localStorage.getItem("karlo"))||[];
    displa(karlo)
    function myfunction(event){
        event.preventDefault()
        var tick = document.querySelector("#ticket").value
        var des = document.querySelector("#issue").value
        var tok = document.querySelector("#token").value
        var obj = {category: tick, description: des, tokennumber: tok}
        karlo.push(obj)
        localStorage.setItem("karlo",JSON.stringify(karlo))
        displa(karlo)
    }
    function  cat(){
        var select = document.querySelector("#category").value;
        console.log(select)
        var filter = karlo.filter(function(elem){
            return elem.category==select
        })
        displa(filter)
    }
    function num(){
        var nums = document.querySelector("#number").value
        if(nums=="High"){
            karlo.sort(function(a,b){
                return Number(b.tokennumber)-Number(a.tokennumber)
            })
        }
        if(nums=="Low"){
            karlo.sort(function(a,b){
                return Number(a.tokennumber)-Number(b.tokennumber)
            })
        }
        displa(karlo)
    }
    function displa(karlo){
        var b = document.querySelector("tbody")
        b.innerText=""
        karlo.map(function(elem){
            var tr = document.createElement("tr")
            var td1 = document.createElement("td")
            var td2 = document.createElement("td")
            var td3 = document.createElement("td")
            var hr1 = document.createElement("hr")
            td1.innerText=elem.tokennumber
            td2.innerText=elem.category
            td3.innerText=elem.description
            tr.append(td1,td2,td3,hr1)
            document.querySelector("tbody").append(tr)
        })
    }
</script>